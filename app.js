function getlogin(){let e="Unlimited Cloud storage using roblox datastores\n\nCredentials:\n";e+=`roblox api key: ${localStorage.getItem("apikey")}
`,e+=`universe ID: ${localStorage.getItem("id")}
`,e+="https://movlol.github.io/unlimitedcloud/";let t=new Blob([e],{type:"text/plain"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download="Roblox Datastores.txt",a.click()}async function handleSignup(){let e=document.getElementById("ai").value,t=document.getElementById("ui").value;localStorage.setItem("apikey",e),localStorage.setItem("id",t),reload()}function logout(){confirm("Are you sure you wanna reset your login")&&(localStorage.clear(),reload())}function generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function removeQueryParameters(){var e=window.location.origin+window.location.pathname;history.replaceState({},document.title,e)}removeQueryParameters();var dValue="root",dValueLook="root",emoji={txt:"\uD83D\uDCC4",doc:"\uD83D\uDCC3",docx:"\uD83D\uDCD1",pdf:"\uD83D\uDCF0",ppt:"\uD83D\uDCCA",pptx:"\uD83D\uDCC8",xls:"\uD83D\uDCC9",xlsx:"\uD83D\uDCCA",csv:"\uD83D\uDCCA",jpg:"\uD83D\uDDBC️",png:"\uD83D\uDDBC️",webp:"\uD83D\uDDBC️",gif:"\uD83D\uDDBC️",mp3:"\uD83C\uDFB5",wav:"\uD83C\uDFB5",mp4:"\uD83C\uDFA5",mov:"\uD83C\uDFA5",avi:"\uD83C\uDFA5",zip:"\uD83D\uDCE6",rar:"\uD83D\uDCE6",exe:"\uD83D\uDCBB",html:"\uD83C\uDF10",css:"\uD83C\uDFA8",js:"\uD83D\uDCDC",json:"\uD83D\uDCC4",xml:"\uD83E\uDDFE",cpp:"\uD83D\uDCBB",java:"☕",py:"\uD83D\uDC0D",rb:"\uD83D\uDC8E",php:"\uD83D\uDC18",md:"\uD83D\uDCDD",key:"\uD83D\uDD11",sql:"\uD83D\uDDC3️",bak:"\uD83D\uDDD1️",conf:"⚙️",log:"\uD83D\uDCCB",cfg:"⚙️",dll:"\uD83D\uDD0C",jar:"\uD83C\uDF76",ttf:"\uD83D\uDD24",otf:"\uD83D\uDD24",psd:"\uD83C\uDFA8",svg:"\uD83C\uDFA8",tmp:"❄️",iso:"\uD83D\uDCBF",backup:"\uD83D\uDDC4️",bat:"\uD83E\uDD87",sh:"\uD83D\uDC1A",h:"\uD83D\uDCBB",hpp:"\uD83D\uDCBB",class:"\uD83D\uDCE6",obj:"\uD83E\uDDF1",swift:"\uD83D\uDC26",kt:"\uD83D\uDC31",cs:"\uD83D\uDCBB",vb:"\uD83D\uDCBB",rtf:"\uD83D\uDCC4",ps1:"\uD83D\uDCDC",patch:"\uD83E\uDE79",cxx:"\uD83D\uDCBB",hxx:"\uD83D\uDCBB",war:"⚔️",ear:"\uD83D\uDC42",pyc:"\uD83D\uDC0D",pyo:"\uD83D\uDC0D",whl:"\uD83D\uDD27",swp:"\uD83D\uDD04",csproj:"\uD83D\uDCE6",suo:"\uD83D\uDD12",pdb:"\uD83D\uDD12",dsp:"\uD83D\uDD0A",vbp:"\uD83D\uDD0C",vbw:"\uD83D\uDD0C",mak:"\uD83D\uDEE0️",ini:"⚙️",asd:"\uD83D\uDDD1️",torrent:"\uD83C\uDF0A",vmx:"\uD83D\uDDA5️",vmdk:"\uD83D\uDCBD",vagrant:"\uD83E\uDDD9",img:"\uD83D\uDDBC️",bin:"\uD83D\uDDD1️",cue:"\uD83C\uDFAE",ova:"\uD83E\uDD5A",tar:"\uD83D\uDDC3️",gz:"\uD83D\uDDC3️",xz:"\uD83D\uDDC3️",bz2:"\uD83D\uDDC3️",apk:"\uD83D\uDCF1"},upload=!1;function createpath(){var e=dValueLook.split("/"),t=dValue.split("/"),a=e.map(function(t,a){return e.slice(0,a+1).join("/"),'<a class="breadcrumb-link">'+decodeURIComponent(t)+"</a>"});document.getElementById("dir").innerHTML=a.join(" / ");var n=document.querySelectorAll(".breadcrumb-link");n.forEach(function(a){a.addEventListener("click",function(){this.textContent;var a=Array.from(n).indexOf(this);dValue=t.slice(0,a+1).join("/"),dValueLook=e.slice(0,a+1).join("/"),loaduploads(),createpath()})})}window.addEventListener("beforeunload",function(e){upload&&(e.returnValue="You are still uploading")});const fileInput=document.getElementById("file-input");function uploadFile(){fileInput.click()}async function createFolder(){let e=prompt("Folder Name:");if(e){let t=await getasync("u",encodeURIComponent(dValue));(t=t?JSON.parse(t):{})[e]=[generateUUID(),"folder"],console.log(t),await setasync("u",encodeURIComponent(dValue),JSON.stringify(t)),loaduploads()}}function generateFileKey(){for(var e="";e.length<100;){var t=46656*Math.random()|0;e+=t=("000"+t.toString(36)).slice(-3)}return e.slice(0,100)}async function setfile(e,t,a){return new Promise((n,l)=>{let o=document.getElementById("upload-progress"),d=document.getElementById("upload-text"),i=document.getElementById("upload-text2"),r=e.name;if(upload){alert("You are already uploading a file"),l(Error("File upload already in progress"));return}if(downloading){alert("Can't upload while downloading"),l(Error("Download in progress"));return}upload=!0;let s=generateUUID(),u=encodeURIComponent(dValue),c=Math.ceil(e.size/524288),_=0;async function f(e,t){await setasync(s,t.toString(),e)}!function p(m){let g=Math.min(m+524288,e.size),$=e.slice(m,g),y=new FileReader;y.onload=async function(){let l=y.result;await f(l,_),_++;let g=_/c*100;o.style.width=`${g}%`,d.textContent=`Uploading ${r}... ${g.toFixed(2)}%`;let $=524288*_/1048576,h=e.size/1048576;if(i.textContent=`${$.toFixed(2)} MB / ${h.toFixed(2)} MB
${t}/${a} Files`,document.title=`${g.toFixed(2)}%`,_<c)p(m+524288);else{d.textContent="Connecting...",i.textContent="";let x=document.getElementById("upload-progress-popup");x.style.display="none";let w=await getasync("u",u);(w=w?JSON.parse(w):{})[r]=[generateUUID(),s,c,e.size],console.log(w),await setasync("u",u,JSON.stringify(w)),loaduploads(),upload=!1,document.title="Roblox Datastore's - Cloud Storage",n()}},y.onerror=function(){console.error("Error reading file chunk"),l(Error("Error reading file chunk"))},y.readAsArrayBuffer($)}(0)})}async function handleFileSelection(e){let t=e.target.files.length,a=0;for(let n of e.target.files){a+=1;let l=document.getElementById("upload-progress-popup");l.style.display="block",document.getElementById("upload-progress"),document.querySelector("#upload-progress-popup"),await setfile(n,a,t)}}function delay(e){return new Promise(t=>{setTimeout(t,e)})}fileInput.addEventListener("change",handleFileSelection);let downloading=!1;async function downloadfile(e,t,a,n){if(downloading){alert("You are already downloading a file.");return}if(upload)return alert("Cant download while uploading");downloading=!0;let l=document.getElementById("upload-progress-popup");l.style.display="block";let o=document.getElementById("upload-progress"),d=document.getElementById("upload-text"),i=document.getElementById("upload-text2"),r=[];for(let s=0;s<a;s++){let u=512*s/1024,c=n/1048576;i.textContent=`${u.toFixed(2)} MB / ${c.toFixed(2)} MB`;let _=await getasync(t,s.toString(),!0);r.push(_);let f=s/a*100;o.style.width=`${f}%`,d.textContent=`Downloading ${e}... ${f.toFixed(2)}%`,document.title=`${f.toFixed(2)}%`}d.textContent="Connecting...",l.style.display="none";let p=new Blob(r),m=document.createElement("a"),g=URL.createObjectURL(p);m.href=g,m.download=e,m.textContent=`Download ready!: ${e}`,m.click(),downloading=!1,document.getElementById("uploads-container").appendChild(m),document.title="Roblox Datastore's - Cloud Storage"}async function createitems(e,t){if(dValue!=t)return;let a=document.getElementById("uploads-container"),n=a.querySelectorAll(".itemlol");n.forEach(e=>{e.parentNode===a&&a.removeChild(e)});let l=Object.entries(e),o=l.filter(([t])=>"folder"===e[t][1]),d=l.filter(([t])=>"folder"!==e[t][1]);o.sort((e,t)=>e[0].localeCompare(t[0])),d.sort((e,t)=>e[0].localeCompare(t[0])),o.forEach(([e,t])=>{let n=document.createElement("a");n.classList.add("itemlol"),n.addEventListener("click",function(a){a.preventDefault(),dValue=dValue+"/"+t[0],dValueLook=dValueLook+"/"+e,loaduploads()});let l=document.createElement("div");l.className="list-item folder",l.style.backgroundColor="#5AB0FA";let o=document.createElement("span");o.textContent="\uD83D\uDCC1"+e;let d=document.createElement("i");d.textContent="delete",d.classList.add("material-icons"),d.addEventListener("click",async function(t){if(t.stopPropagation(),confirm(`Would you like to delete folder ${e}`)){let a=await getasync("u",encodeURIComponent(dValue));delete(a=a?JSON.parse(a):{})[e],console.log(a),await setasync("u",encodeURIComponent(dValue),JSON.stringify(a)),loaduploads()}}),l.appendChild(o),l.appendChild(d),n.appendChild(l),a.appendChild(n)}),d.forEach(([e,t])=>{let n=document.createElement("a");n.classList.add("itemlol");var l,o,d=(o=(l=e).split(".")).length>1?o.pop():"";let i=document.createElement("div");i.className="list-item";let r=emoji[d];r||(r="❓");let s=document.createElement("span");s.textContent=r+e;let u=document.createElement("i");u.textContent="delete",u.classList.add("material-icons"),u.addEventListener("click",async function(t){if(t.stopPropagation(),confirm(`Would you like to delete file ${e}`)){let a=await getasync("u",encodeURIComponent(dValue));delete(a=a?JSON.parse(a):{})[e],console.log(a),await setasync("u",encodeURIComponent(dValue),JSON.stringify(a)),loaduploads()}}),i.appendChild(s),i.appendChild(u),n.appendChild(i),a.appendChild(n),n.addEventListener("click",function(a){a.preventDefault(),downloadfile(e,t[1],t[2],t[3])})})}async function loaduploads(){createpath(),createitems({},dValue);let e=localStorage.getItem("up1"+encodeURIComponent(dValue));if(e){let t=JSON.parse(e);createitems(t,dValue)}let a=dValue,n=await getasync("u",encodeURIComponent(a));n?(n=JSON.parse(n),localStorage.setItem("up1"+encodeURIComponent(a),JSON.stringify(n))):n={},createitems(n,a)}function reload(){document.getElementById("auth").style.display="none",document.getElementById("content").style.display="none";let e=localStorage.getItem("apikey"),t=localStorage.getItem("id");e&&t?document.getElementById("content").style.display="":document.getElementById("auth").style.display=""}document.addEventListener("DOMContentLoaded",function(){loaduploads()}),reload();var MD5=function(e){return M(V(Y(X(e),8*e.length))).toLowerCase()};function M(e){for(var t,a="0123456789ABCDEF",n="",l=0;l<e.length;l++)n+=a.charAt((t=e.charCodeAt(l))>>>4&15)+a.charAt(15&t);return n}function X(e){for(var t=Array(e.length>>2),a=0;a<t.length;a++)t[a]=0;for(a=0;a<8*e.length;a+=8)t[a>>5]|=(255&e.charCodeAt(a/8))<<a%32;return t}function V(e){for(var t="",a=0;a<32*e.length;a+=8)t+=String.fromCharCode(e[a>>5]>>>a%32&255);return t}function Y(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var a=1732584193,n=-271733879,l=-1732584194,o=271733878,d=0;d<e.length;d+=16){var i=a,r=n,s=l,u=o;n=md5_ii(n=md5_ii(n=md5_ii(n=md5_ii(n=md5_hh(n=md5_hh(n=md5_hh(n=md5_hh(n=md5_gg(n=md5_gg(n=md5_gg(n=md5_gg(n=md5_ff(n=md5_ff(n=md5_ff(n=md5_ff(n,l=md5_ff(l,o=md5_ff(o,a=md5_ff(a,n,l,o,e[d+0],7,-680876936),n,l,e[d+1],12,-389564586),a,n,e[d+2],17,606105819),o,a,e[d+3],22,-1044525330),l=md5_ff(l,o=md5_ff(o,a=md5_ff(a,n,l,o,e[d+4],7,-176418897),n,l,e[d+5],12,1200080426),a,n,e[d+6],17,-1473231341),o,a,e[d+7],22,-45705983),l=md5_ff(l,o=md5_ff(o,a=md5_ff(a,n,l,o,e[d+8],7,1770035416),n,l,e[d+9],12,-1958414417),a,n,e[d+10],17,-42063),o,a,e[d+11],22,-1990404162),l=md5_ff(l,o=md5_ff(o,a=md5_ff(a,n,l,o,e[d+12],7,1804603682),n,l,e[d+13],12,-40341101),a,n,e[d+14],17,-1502002290),o,a,e[d+15],22,1236535329),l=md5_gg(l,o=md5_gg(o,a=md5_gg(a,n,l,o,e[d+1],5,-165796510),n,l,e[d+6],9,-1069501632),a,n,e[d+11],14,643717713),o,a,e[d+0],20,-373897302),l=md5_gg(l,o=md5_gg(o,a=md5_gg(a,n,l,o,e[d+5],5,-701558691),n,l,e[d+10],9,38016083),a,n,e[d+15],14,-660478335),o,a,e[d+4],20,-405537848),l=md5_gg(l,o=md5_gg(o,a=md5_gg(a,n,l,o,e[d+9],5,568446438),n,l,e[d+14],9,-1019803690),a,n,e[d+3],14,-187363961),o,a,e[d+8],20,1163531501),l=md5_gg(l,o=md5_gg(o,a=md5_gg(a,n,l,o,e[d+13],5,-1444681467),n,l,e[d+2],9,-51403784),a,n,e[d+7],14,1735328473),o,a,e[d+12],20,-1926607734),l=md5_hh(l,o=md5_hh(o,a=md5_hh(a,n,l,o,e[d+5],4,-378558),n,l,e[d+8],11,-2022574463),a,n,e[d+11],16,1839030562),o,a,e[d+14],23,-35309556),l=md5_hh(l,o=md5_hh(o,a=md5_hh(a,n,l,o,e[d+1],4,-1530992060),n,l,e[d+4],11,1272893353),a,n,e[d+7],16,-155497632),o,a,e[d+10],23,-1094730640),l=md5_hh(l,o=md5_hh(o,a=md5_hh(a,n,l,o,e[d+13],4,681279174),n,l,e[d+0],11,-358537222),a,n,e[d+3],16,-722521979),o,a,e[d+6],23,76029189),l=md5_hh(l,o=md5_hh(o,a=md5_hh(a,n,l,o,e[d+9],4,-640364487),n,l,e[d+12],11,-421815835),a,n,e[d+15],16,530742520),o,a,e[d+2],23,-995338651),l=md5_ii(l,o=md5_ii(o,a=md5_ii(a,n,l,o,e[d+0],6,-198630844),n,l,e[d+7],10,1126891415),a,n,e[d+14],15,-1416354905),o,a,e[d+5],21,-57434055),l=md5_ii(l,o=md5_ii(o,a=md5_ii(a,n,l,o,e[d+12],6,1700485571),n,l,e[d+3],10,-1894986606),a,n,e[d+10],15,-1051523),o,a,e[d+1],21,-2054922799),l=md5_ii(l,o=md5_ii(o,a=md5_ii(a,n,l,o,e[d+8],6,1873313359),n,l,e[d+15],10,-30611744),a,n,e[d+6],15,-1560198380),o,a,e[d+13],21,1309151649),l=md5_ii(l,o=md5_ii(o,a=md5_ii(a,n,l,o,e[d+4],6,-145523070),n,l,e[d+11],10,-1120210379),a,n,e[d+2],15,718787259),o,a,e[d+9],21,-343485551),a=safe_add(a,i),n=safe_add(n,r),l=safe_add(l,s),o=safe_add(o,u)}return[a,n,l,o]}function md5_cmn(e,t,a,n,l,o){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(n,o)),l),a)}function md5_ff(e,t,a,n,l,o,d){return md5_cmn(t&a|~t&n,e,t,l,o,d)}function md5_gg(e,t,a,n,l,o,d){return md5_cmn(t&n|a&~n,e,t,l,o,d)}function md5_hh(e,t,a,n,l,o,d){return md5_cmn(t^a^n,e,t,l,o,d)}function md5_ii(e,t,a,n,l,o,d){return md5_cmn(a^(t|~n),e,t,l,o,d)}function safe_add(e,t){var a=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}function bit_rol(e,t){return e<<t|e>>>32-t}let prefix="7";async function getasync(e,t,a){for(;;)try{let n=await fetch(`https://tight-cloud-297a.4zuca4.workers.dev/datastores/v1/universes/${localStorage.getItem("id")}/standard-datastores/datastore/entries/entry?datastoreName=${MD5(prefix+e)}&entryKey=${MD5(t)}`,{headers:{"x-api-key":localStorage.getItem("apikey")}});if(429===n.status||500===n.status){await delay(5e3);continue}if(404===n.status)return;let l=await n.json();if(!a)return atob(l);{let o=atob(l),d=new Uint8Array(o.length);for(let i=0;i<o.length;i++)d[i]=o.charCodeAt(i);let r=new Blob([d]);return r}}catch(s){console.error("Network error:",s),await delay(5e3)}}function toBase64(e){let t;if("string"==typeof e)t=new TextEncoder().encode(e);else if(e instanceof ArrayBuffer)t=new Uint8Array(e);else throw Error("Unsupported input type");let a="";return t.forEach(e=>{a+=String.fromCharCode(e)}),btoa(a)}async function setasync(e,t,a){let n=toBase64(a);for(;;)try{let l=await fetch(`https://tight-cloud-297a.4zuca4.workers.dev/datastores/v1/universes/${localStorage.getItem("id")}/standard-datastores/datastore/entries/entry?datastoreName=${MD5(prefix+e)}&entryKey=${MD5(t)}`,{headers:{"x-api-key":localStorage.getItem("apikey"),"content-type":"application/json"},body:JSON.stringify([n]),method:"POST"});if(429===l.status||500===l.status){await delay(5e3);continue}await l.json();break}catch(o){console.error("Network error:",o),await delay(5e3)}}